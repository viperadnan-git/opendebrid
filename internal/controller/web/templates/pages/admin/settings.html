{{define "content"}}
{{template "nav" .}}
<main class="container" x-data="{
    settings: [],
    loading: true,
    async load() {
        const resp = await api('/admin/settings');
        if (resp.success) this.settings = resp.data;
        this.loading = false;
    }
}" x-init="load()">
    <h2>Settings</h2>
    <div class="table-wrap">
        <div x-show="loading" class="loading" aria-busy="true">Loading...</div>
        <table x-show="!loading" role="grid" style="min-width:480px">
            <colgroup><col style="width:28%"><col style="width:28%"><col style="width:44%"></colgroup>
            <thead><tr><th>Key</th><th>Value</th><th>Description</th></tr></thead>
            <tbody>
                <template x-if="settings.length === 0 && !loading">
                    <tr><td colspan="3" class="empty-state">No settings configured</td></tr>
                </template>
                <template x-for="s in settings" :key="s.key">
                    <tr>
                        <td class="cell-mono cell-truncate" :title="s.key" x-text="s.key"></td>
                        <td class="cell-truncate" :title="s.value"><code x-text="s.value"></code></td>
                        <td class="cell-truncate" :title="s.description" x-text="s.description"></td>
                    </tr>
                </template>
            </tbody>
        </table>
    </div>
</main>
{{end}}
