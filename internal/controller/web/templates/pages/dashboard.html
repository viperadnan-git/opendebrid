{{define "content"}}
{{template "nav" .}}
<main class="container">
    <h2>Dashboard</h2>

    <div class="grid-stats">
        <article class="stat-card">
            <div class="stat-label">Active Downloads</div>
            <div class="stat-value" id="active-count"
                 hx-get="/htmx/stats/active" hx-trigger="load, every 5s" hx-swap="innerHTML">
                &mdash;
            </div>
        </article>
        <article class="stat-card">
            <div class="stat-label">Engines</div>
            <div class="stat-value">
                {{len .Engines}}<span class="unit"> available</span>
            </div>
            <div style="margin-top:0.5rem">
                {{range .Engines}}<span class="tag">{{.}}</span> {{end}}
            </div>
        </article>
        <article class="stat-card">
            <div class="stat-label">Node</div>
            <div class="stat-value" style="font-size:1rem">{{.NodeID}}</div>
            <div style="margin-top:0.5rem">
                <span class="status status-online">Online</span>
            </div>
        </article>
    </div>

    <h3>Recent Downloads</h3>
    <div class="table-wrap" hx-get="/htmx/downloads/recent" hx-trigger="load" hx-swap="innerHTML">
        <div class="loading" aria-busy="true">Loading...</div>
    </div>
</main>
{{end}}
